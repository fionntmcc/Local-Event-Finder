<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/tabs/events"></ion-back-button>
        </ion-buttons>
        <ion-title>Event Details</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div *ngIf="loading" class="loading-container">
        <ion-spinner></ion-spinner>
        <p>Loading event details...</p>
    </div>

    <div *ngIf="error" class="error-container">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <p>Unable to load event details. Please try again later.</p>
    </div>

    <div *ngIf="!loading && !error && event" class="event-container">
        <ion-card class="event-image-card">
            <img *ngIf="event.images && event.images.length" [src]="event.images[0].url" [alt]="event.name">
            <ion-card-header>
                <ion-card-title>{{ event.name }}</ion-card-title>
            </ion-card-header>
        </ion-card>

        <ion-list lines="none" class="event-details-list">
            <ion-list-header>
                <ion-label>Event Information</ion-label>
            </ion-list-header>
            
            <ion-item>
                <ion-icon name="calendar-outline" slot="start"></ion-icon>
                <ion-label>
                    <h2>Date</h2>
                    <p>{{ event.dates?.start?.localDate | date:'EEEE, MMMM d, y' }}</p>
                </ion-label>
            </ion-item>
            
            <ion-item>
                <ion-icon name="time-outline" slot="start"></ion-icon>
                <ion-label>
                    <h2>Time</h2>
                    <p>{{ event.dates?.start?.localTime | date:'h:mm a' }}</p>
                </ion-label>
            </ion-item>
            
            <ion-item *ngIf="event._embedded?.venues && event._embedded?.venues.length">
                <ion-icon name="location-outline" slot="start"></ion-icon>
                <ion-label>
                    <h2>Venue</h2>
                    <p>{{ event._embedded.venues[0].name }}</p>
                </ion-label>
            </ion-item>
            
            <ion-item *ngIf="event.info" class="description-item">
                <ion-label>
                    <h2>About</h2>
                    <p>{{ event.info }}</p>
                </ion-label>
            </ion-item>
            
            <ion-item *ngIf="event.classifications && event.classifications.length">
                <ion-label>
                    <h2>Categories</h2>
                    <div class="categories-list">
                        <ion-chip *ngIf="event.classifications[0].segment?.name">
                            {{ event.classifications[0].segment.name }}
                        </ion-chip>
                        <ion-chip *ngIf="event.classifications[0].genre?.name">
                            {{ event.classifications[0].genre.name }}
                        </ion-chip>
                        <ion-chip *ngIf="event.classifications[0].subGenre?.name">
                            {{ event.classifications[0].subGenre.name }}
                        </ion-chip>
                    </div>
                </ion-label>
            </ion-item>
        </ion-list>
        
        <div class="ticket-info" *ngIf="event.url">
            <a [href]="event.url" target="_blank" class="buy-tickets-btn">
                <ion-button expand="block" color="primary">
                    <ion-icon name="ticket-outline" slot="start"></ion-icon>
                    Buy Tickets
                </ion-button>
            </a>
        </div>
    </div>
</ion-content>